"use strict";(self.webpackChunkmarvel_information_portal=self.webpackChunkmarvel_information_portal||[]).push([[787],{355:(e,t,s)=>{s.d(t,{A:()=>r});const a=s.p+"static/media/Avengers.4065c8f9c94e3d8b039a.png",c=s.p+"static/media/Avengers_logo.9eaf219344d83362e830.png";var n=s(579);const r=()=>(0,n.jsxs)("div",{className:"app__banner",children:[(0,n.jsx)("img",{src:a,alt:"Avengers"}),(0,n.jsxs)("div",{className:"app__banner-text",children:["New comics every week!",(0,n.jsx)("br",{}),"Stay tuned!"]}),(0,n.jsx)("img",{src:c,alt:"Avengers logo"})]})},882:(e,t,s)=>{s.d(t,{A:()=>n});const a=s.p+"static/media/error.42292aa12b6bc303ce99.gif";var c=s(579);const n=()=>(0,c.jsx)("img",{src:a,className:"error-message-img",alt:"Error message"})},866:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(802),c=s(355),n=s(43),r=s(475),i=s(772),o=s(523),l=s(228),m=s(818),u=s(882),d=s(579);const h=(e,t,s)=>{switch(e){case"waiting":return(0,d.jsx)(m.A,{});case"loading":return s?(0,d.jsx)(t,{}):(0,d.jsx)(m.A,{});case"confirmed":return(0,d.jsx)(t,{});case"error":return(0,d.jsx)(u.A,{});default:throw new Error("Unexpected process state")}},p=()=>{const[e,t]=(0,n.useState)([]),[s,a]=(0,n.useState)(!1),[c,m]=(0,n.useState)(0),[u,p]=(0,n.useState)(!1),{process:g,setProcess:b,getAllComics:x}=(0,l.A)();(0,n.useEffect)((()=>{f(c,!0)}),[]);const f=(e,t)=>{a(!t),x(e).then(j).then((()=>b("confirmed")))},j=async e=>{let s=!1;e.length<8&&(s=!0),t((t=>[...t,...e])),a(!1),m((e=>e+8)),p(s)};return(0,d.jsxs)("div",{className:"comics__list",children:[h(g,(()=>function(e){const t=e.map(((e,t)=>(0,d.jsx)(i.A,{timeout:500,classNames:"comics__item",children:(0,d.jsx)("li",{className:"comics__item",children:(0,d.jsxs)(r.N_,{to:"/comics/".concat(e.id),children:[(0,d.jsx)("img",{src:e.thumbnail,alt:e.title,className:"comics__item-img"}),(0,d.jsx)("div",{className:"comics__item-name",children:e.title}),(0,d.jsx)("div",{className:"comics__item-price",children:e.price})]})},t)},e.id)));return(0,d.jsx)("ul",{className:"comics__grid",children:(0,d.jsx)(o.A,{component:null,children:t})})}(e)),s),(0,d.jsx)("button",{className:"button button__main button__long",disabled:s,style:{display:u?"none":"block"},onClick:()=>f(c),children:(0,d.jsx)("div",{className:"inner",children:"load more"})})]})},g=()=>(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(a.vd,{children:[(0,d.jsxs)(a.mg,{children:[(0,d.jsx)("meta",{name:"description",content:"Page with list of our comics"}),(0,d.jsx)("title",{children:"Comics Page"})]}),(0,d.jsx)(c.A,{}),(0,d.jsx)(p,{})]})})},228:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(43);const c=function(e){return"string"!==typeof e?e:e.startsWith("http://")?e.replace("http://","https://"):e},n=()=>{const{process:e,setProcess:t,request:s,clearError:n}=(()=>{const[e,t]=(0,a.useState)("waiting"),s=(0,a.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-type":"application/json"};t("loading");try{const t=await fetch(e,{method:s,body:a,headers:c});if(!t.ok)throw new Error("Could not fetch ".concat(e,", status: ").concat(t.status));return await t.json()}catch(n){return t("error"),console.warn("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430",n.message),null}}),[]),c=(0,a.useCallback)((()=>{t("loading")}),[]);return{process:e,setProcess:t,request:s,clearError:c}})(),r="https://gateway.marvel.com:443/v1/public/",i="apikey=48016fbc64705610f2040226da4655f7",o=e=>({name:e.name,description:e.description?"".concat(e.description.slice(0,200),"..."):"There is no description for this character.",thumbnail:c(e.thumbnail.path+"."+e.thumbnail.extension),id:e.id,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}),l=e=>({id:e.id,title:e.title,price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"Not available",description:e.description||"There is no description",pageCount:e.pageCount?"".concat(e.pageCount," h."):"No information about the number of pages",thumbnail:c(e.thumbnail.path+"."+e.thumbnail.extension),language:e.textObjects.language||"en-us",url:e.urls[0].url});return{process:e,setProcess:t,clearError:n,getAllCharacters:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:210;return(await s("".concat(r,"characters?limit=9&offset=").concat(e,"&").concat(i))).data.results.map((e=>o(e)))},getCharacter:async e=>{const t=await s("".concat(r,"characters/").concat(e,"?").concat(i));return t?o(t.data.results[0]):(console.warn("\u26a0 \u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436 \u0441 ID ".concat(e," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d, \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0437\u0430\u0433\u043b\u0443\u0448\u043a\u0443")),{name:"Unknown Character",description:"No data available",thumbnail:"https://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"})},getAllComics:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(await s("".concat(r,"comics?orderBy=issueNumber&limit=8&offset=").concat(e,"&").concat(i))).data.results.map((e=>l(e)))},getComic:async e=>{const t=await s("".concat(r,"comics/").concat(e,"?").concat(i));return l(t.data.results[0])},getCharacterByName:async e=>{const t=await s("".concat(r,"characters?name=").concat(e,"&").concat(i));return t.data.results[0]?o(t.data.results[0]):{}}}}}}]);
//# sourceMappingURL=787.0d33ee2d.chunk.js.map